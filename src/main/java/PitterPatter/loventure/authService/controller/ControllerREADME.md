# AuthService: API μ»¨νΈλ΅¤λ¬ (Controller) π“΅

μ΄ λ¬Έμ„λ” `authService` λ‚΄ `controller` ν¨ν‚¤μ§€μ μ—­ν• κ³Ό API μ—”λ“ν¬μΈνΈλ“¤μ„ μ„¤λ…ν•©λ‹λ‹¤. μ΄ ν¨ν‚¤μ§€λ” ν΄λΌμ΄μ–ΈνΈμ HTTP μ”μ²­μ„ κ°€μ¥ λ¨Όμ € λ°›μ•„ μ²λ¦¬ν•λ” **μ• ν”λ¦¬μΌ€μ΄μ…μ μ§„μ…μ **μ…λ‹λ‹¤.

μ»¨νΈλ΅¤λ¬λ” ν¬κ² **μ‹¤μ  μ„λΉ„μ¤μ© μ»¨νΈλ΅¤λ¬**μ™€ **κ°λ°/ν…μ¤νΈμ© μ»¨νΈλ΅¤λ¬**λ΅ λ‚λ‰©λ‹λ‹¤.

---

## `AuthController.java` (μ΄μμ© μ»¨νΈλ΅¤λ¬)

μ‹¤μ  μ„λΉ„μ¤μ—μ„ μ‚¬μ©λλ” ν•µμ‹¬ μΈμ¦ λ° μ‚¬μ©μ κ΄€λ ¨ APIλ¥Ό μ κ³µν•©λ‹λ‹¤. `/api/auth` κ²½λ΅μ λ¨λ“  μ—”λ“ν¬μΈνΈλ” `SecurityConfig`μ— μν•΄ μΈμ¦(`JWTFilter`λ¥Ό ν†µκ³Όν•΄μ•Ό ν•¨)μ΄ ν•„μ”ν•λ„λ΅ λ³΄νΈλ©λ‹λ‹¤. (μΌλ¶€ μμ™Έ μ΅΄μ¬)

###  μ£Όμ” API μ—”λ“ν¬μΈνΈ

* **`POST /api/auth/refresh`**
    * **μ„¤λ…**: λ§λ£λ Access Tokenμ„ κ°±μ‹ ν•κΈ° μ„ν•΄ Refresh Tokenμ„ λ°›μ•„ μƒλ΅μ΄ ν† ν°λ“¤μ„ λ°κΈ‰ν•©λ‹λ‹¤.
    * **μ”μ²­**: `refreshToken` (μΏΌλ¦¬ νλΌλ―Έν„°)
    * **μ‘λ‹µ**: μ„±κ³µ μ‹ μƒλ΅μ΄ ν† ν° μ •λ³΄ (`AuthResponse`)

* **`GET /api/auth/me`**
    * **μ„¤λ…**: ν„μ¬ λ΅κ·ΈμΈλ μ‚¬μ©μμ μƒμ„Έ μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤. `Authorization` ν—¤λ”μ ν† ν°μ„ κΈ°λ°μΌλ΅ μ‚¬μ©μλ¥Ό μ‹λ³„ν•©λ‹λ‹¤.
    * **μ”μ²­**: `Authorization: Bearer <access_token>` (HTTP ν—¤λ”)
    * **μ‘λ‹µ**: μ„±κ³µ μ‹ μ‚¬μ©μ μ •λ³΄ (`UserInfo`)

* **`POST /api/auth/logout`**
    * **μ„¤λ…**: μ‚¬μ©μμ λ΅κ·Έμ•„μ›ƒμ„ μ²λ¦¬ν•©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ΄ APIλ¥Ό νΈμ¶ν• ν›„ μμ²΄μ μΌλ΅ μ €μ¥λ ν† ν°μ„ νκΈ°ν•΄μ•Ό ν•©λ‹λ‹¤.
    * **μ”μ²­**: `Authorization: Bearer <access_token>` (HTTP ν—¤λ”)
    * **μ‘λ‹µ**: μ„±κ³µ λ©”μ‹μ§€

* **`GET /api/auth/status`**
    * **μ„¤λ…**: νΉμ • μ΄λ©”μΌμ΄ μ΄λ―Έ κ°€μ…λμ–΄ μλ”μ§€, κ°€μ…λ κ²½μ° μ–΄λ–¤ μ†μ… λ΅κ·ΈμΈ λ°©μ‹μΈμ§€ μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤. (μ΄ APIλ” μΈμ¦μ΄ ν•„μ” μ—†μ)
    * **μ”μ²­**: `email` (μΏΌλ¦¬ νλΌλ―Έν„°)
    * **μ‘λ‹µ**: κ³„μ • μ΅΄μ¬ μ—¬λ¶€, κ°€μ… μ ν•(`providerType`), μƒνƒ(`status`)

---

## `TestController.java` (κ°λ°μ© μ»¨νΈλ΅¤λ¬) π§

**β οΈ μ¤‘μ”: μ΄ μ»¨νΈλ΅¤λ¬λ” κ°λ° λ° ν…μ¤νΈ λ‹¨κ³„μ νΈμλ¥Ό μ„ν•΄μ„λ§ μ‚¬μ©λλ©°, μ λ€λ΅ μ΄μ(Production) ν™κ²½μ— λ°°ν¬λμ–΄μ„λ” μ• λ©λ‹λ‹¤.**

λ§¤λ² μ†μ… λ΅κ·ΈμΈμ„ κ±°μΉμ§€ μ•κ³ λ„ μ‚¬μ©μλ¥Ό μƒμ„±ν•κ±°λ‚ JWTλ¥Ό λ°κΈ‰λ°›λ” λ“± λ°±μ—”λ“ κΈ°λ¥μ„ λ…λ¦½μ μΌλ΅ ν…μ¤νΈν•  μ μλ” APIλ¥Ό μ κ³µν•©λ‹λ‹¤.

### μ£Όμ” API μ—”λ“ν¬μΈνΈ

* **`GET /api/test/jwt/create`**
    * **μ„¤λ…**: νΉμ • `providerId`λ¥Ό κ°€μ§„ μ„μ‹ JWT ν† ν°μ„ μ¦‰μ‹ μƒμ„±ν•©λ‹λ‹¤.
    * **μ”μ²­**: `providerId` (μΏΌλ¦¬ νλΌλ―Έν„°)

* **`GET /api/test/jwt/validate`**
    * **μ„¤λ…**: μ£Όμ–΄μ§„ ν† ν°μ μ ν¨μ„±μ„ κ²€μ¦ν•κ³ , ν† ν°μ— λ‹΄κΈ΄ μ‚¬μ©μ μ •λ³΄λ¥Ό λ°ν™ν•©λ‹λ‹¤.
    * **μ”μ²­**: `token` (μΏΌλ¦¬ νλΌλ―Έν„°)

* **`GET /api/test/users/create`**
    * **μ„¤λ…**: μ†μ… λ΅κ·ΈμΈ μ μ°¨ μ—†μ΄ ν…μ¤νΈμ© μ‚¬μ©μλ¥Ό DBμ— κ°•μ λ΅ μƒμ„±ν•©λ‹λ‹¤.
    * **μ”μ²­**: `providerId`, `email`, `name` (μΏΌλ¦¬ νλΌλ―Έν„°)

### λ³΄μ• κ°€μ΄λ“

μ΄μ ν™κ²½ λ°°ν¬ μ‹, `@Profile("!prod")` μ–΄λ…Έν…μ΄μ…μ„ `TestController` ν΄λμ¤μ— μ¶”κ°€ν•μ—¬ μ΄μ ν”„λ΅ν•„μ—μ„λ” μ΄ μ»¨νΈλ΅¤λ¬κ°€ λ΅λ“λμ§€ μ•λ„λ΅ λ°λ“μ‹ μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤.